# str

在python中处理文本数据是使用str对象，也称为 *字符串*。 字符串是由 Unicode 码位构成的不可变序列。 字符串字面值有多种不同的写法：

- 单引号: `'允许包含有 "双" 引号'`
- 双引号: `"允许包含有 '单' 引号"`。
- 三重引号: `'''三重单引号'''`, `"""三重双引号"""`

使用三重引号的字符串可以跨越多行 —— 其中所有的空白字符都将包含在该字符串字面值中。

作为单一表达式组成部分，之间只由空格分隔的多个字符串字面值会被隐式地转换为单个字符串字面值。 也就是说，`("spam " "eggs") == "spam eggs"`。

## 字符串字面值

词法定义（BNF 语法标注）

```
stringprefix    ::=  "r" | "u" | "R" | "U" | "f" | "F"
                     | "fr" | "Fr" | "fR" | "FR" | "rf" | "rF" | "Rf" | "RF"
shortstringchar ::=  <any source character except "\" or newline or the quote>
longstringchar  ::=  <any source character except "\">
stringescapeseq ::=  "\" <any source character>
```

```
longstring      ::=  "'''" longstringitem* "'''" | '"""' longstringitem* '"""'
shortstring     ::=  "'" shortstringitem* "'" | '"' shortstringitem* '"'

stringliteral   ::=  [stringprefix](shortstring | longstring)
```

 stringprefix 或 bytesprefix 与字面值的剩余部分之间不允许有空白。源字符集是由编码声明定义的；如果源文件中没有编码声明则默认为 UTF-8。

## 编码声明

如果一条注释位于 Python 脚本的第一或第二行，并且匹配正则表达式 `coding[=:]\s*([-\w.]+)`，这条注释会被作为编码声明来处理；上述表达式的第一组指定了源码文件的编码。编码声明必须独占一行。如果它是在第二行，则第一行也必须是注释。推荐的编码声明形式如下

```python
# -*- coding: <encoding-name> -*-
```

这也是 GNU Emacs 认可的形式，以及

```python
# vim:fileencoding=<encoding-name>
```

这是 Bram Moolenaar 的 VIM 认可的形式。

如果没有编码声明，则默认编码为 UTF-8。此外，如果文件的首字节为 UTF-8 字节顺序标志 (`b'\xef\xbb\xbf'`)，文件编码也声明为 UTF-8 (这是 Microsoft 的 **notepad** 等软件支持的形式)。

编码声明指定的编码名称必须是 Python 所认可的编码。所有词法分析将使用此编码，包括语义字符串、注释和标识符。

## 字符串格式化输出

**注意：**格式化操作具有多种怪异特性，可能导致许多常见错误（例如无法正确显示元组和字典）。使用较新的 格式化字符串字面值，str.format() 接口或 模板字符串 有助于避免这样的错误。



### 必选项：

1. `'%'` 字符，用于标记转换符的起始。
2. 使用转换符确定转换类型。

| 转换符       | **含义**                                                     | 注释                               |
| ------------ | ------------------------------------------------------------ | ---------------------------------- |
| `'d'`        | 有符号十进制整数。                                           |                                    |
| `'i'`        | 有符号十进制整数。                                           |                                    |
| `'o'`        | 有符号八进制数。                                             | [详情](#`'o'`)                     |
| `'u'`        | 过时类型 -- 等价于 `'d'`。                                   | [详情](#`'u'`)                     |
| `'x'`        | 有符号十六进制数（小写）。                                   | [详情](#`'x'`,`'X'` )              |
| `'X'`        | 有符号十六进制数（大写）。                                   | [详情](#`'x'`,`'X'` )              |
| `'e'`        | 浮点指数格式（小写）。                                       | [详情](#`'e'` ,`'E' `,`'f'`,`'F'`) |
| `'E'`        | 浮点指数格式（大写）。                                       | [详情](#`'e'` ,`'E' `,`'f'`,`'F'`) |
| `'f'`或`'F'` | 浮点十进制格式。                                             | [详情](#`'e'` ,`'E' `,`'f'`,`'F'`) |
| `'g'`或`'G'` | 浮点格式。 如果指数小于 -4 或不小于精度则使用小写指数格式，否则使用十进制格式。 | [详情](#`'g'`或`'G'`)              |
| `'c'`        | 单个字符（接受整数或单个字符的字符串）。                     |                                    |
| `'r'`        | 字符串（使用 [`repr()`](https://docs.python.org/zh-cn/3/library/functions.html#repr) 转换任何 Python 对象）。 | [详情](#`'r'`,`'s'`,`'a'`)         |
| `'s'`        | 字符串（使用 [`str()`](https://docs.python.org/zh-cn/3/library/stdtypes.html#str) 转换任何 Python 对象）。 | [详情](#`'r'`,`'s'`,`'a'`)         |
| `'a'`        | 字符串（使用 [`ascii()`](https://docs.python.org/zh-cn/3/library/functions.html#ascii) 转换任何 Python 对象）。 | [详情](#`'r'`,`'s'`,`'a'`)         |
| `'%'`        | 不转换参数，在结果中输出一个 `'%'` 字符。                    |                                    |

#### 注释：

##### `'o'`

此替代形式会在第一个数码之前插入标示八进制数的前缀 (`'0o'`)。

##### `'u'`

参见 [**PEP 237**](https://www.python.org/dev/peps/pep-0237)。

##### `'x'`,`'X'`

此替代形式会在第一个数码之前插入 `'0x'` 或 `'0X'` 前缀（取决于是使用 `'x'` 还是 `'X'` 格式）。

##### `'e'` ,`'E' `,`'f'`,`'F'`

此替代形式总是会在结果中包含一个小数点，即使其后并没有数码。
小数点后的数码位数由精度决定，默认为 6。

##### `'g'`,`'G'`

此替代形式会在第一个数码之前插入 `'0x'` 或 `'0X'` 前缀（取决于是使用 `'x'` 还是 `'X'` 格式）。

##### `'r'`,`'s'`,`'a'`

果精度为 `N`，输出将截短为 `N` 个字符。

## 方法

此表按优先级升序列出了序列操作。 在表格中，*s* 和 *t* 是具有相同类型的序列，*n*, *i*, *j* 和 *k* 是整数而 *x* 是任何满足 *s* 所规定的类型和值限制的任意对象。

`in` 和 `not in` 操作具有与比较操作相同的优先级。 `+` (拼接) 和 `*` (重复) 操作具有与对应数值运算相同的优先级。

[官方文档对于序列操作的解释，包含字母的意义，以及注意事项。](https://docs.python.org/zh-cn/3/library/stdtypes.html#typesseq)

| 运算               | 结果：                                                    |
| ------------------ | --------------------------------------------------------- |
| x in s             | 如果 *s* 中的某项等于 *x* 则结果为 `True`，否则为 `False` |
| `x not in s`       | 如果 *s* 中的某项等于 *x* 则结果为 `False`，否则为 `True` |
| `s + t`            | *s* 与 *t* 相拼接                                         |
| `s * n` 或 `n * s` | 相当于 *s* 与自身进行 *n* 次拼接                          |
| `s[i]`             | *s* 的第 *i* 项，起始为 0                                 |
| `s[i:j]`           | *s* 从 *i* 到 *j* 的切片                                  |
| `s[i:j:k]`         | *s* 从 *i* 到 *j* 步长为 *k* 的切片                       |

### 改

不存在可变的字符串类型，但是 str.join() 或 io.StringIO 可以被被用来根据多个片段高效率地构建字符串。

### 删



### 查